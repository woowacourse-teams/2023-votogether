{"version":3,"file":"components-PostForm-PostForm-stories.a8f0f7e1.iframe.bundle.js","mappings":";;;;AAOA;;;;AAMA;;;;;;AAQA;;;;;AAKA;AAGA;;AAIA;;;;;;;;;;;;;;;;;;;;;ACxBA;;AAEA;;;AAKA;;;;;;AAQA;;;;;;;;;;;;AAYA;;;;;;;AASA;;;;;;;AAOA;;;;AAIA;;;AAKA;;;;;;;;;;;;AAYA;;;;;AAKA;;;;AAMA;;;;;;;;;AASA;;;;;AAOA;;;;;;;AASA;;;;;;;;AAQA;;;;;AAOA;;;;AAMA;;;;AAMA;;;;;;;AASA;;;;;AAKA;;;;;;;;;;AAYA;;;;;;;;;;;AAaA;;;;;;;;;AAUA;;;;;;;;;;;AAaA;;;;;;;;ACpKA;;;ACjBA;AACA;;;;;;AAMA;;;;;;;ACRA;;;;;;;;AAUA;;;;;;;;;AASA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBA;AAEA;;;;;;;;;;;;;;;;;;;;;;ACKA;;;;;;;;AAQA;;;AAGA;;;;;;;;;ACpBA;;;;;;;AASA;;;;;;;;;AChBA;AAGA;;;;ACAA;AAGA;AACA;AAGA;;AAIA;;;ACVA;;;;;;;;;;AAYA;;;;;;AAQA;;;;;;;;;;;;AAYA;;;;;AAOA;;;;;AAOA;;;;;;AAQA;;;;AAMA;;;AAKA;;;;AAuBA;;;;;;;;;ACxFA","sources":["webpack://votogether/./src/components/PostForm/ContentImageSection/style.ts","webpack://votogether/./src/components/PostForm/style.ts","webpack://votogether/./src/components/PostForm/index.tsx","webpack://votogether/./src/components/common/AddButton/style.ts","webpack://votogether/./src/components/common/Modal/style.ts","webpack://votogether/./src/components/common/SquareButton/style.ts","webpack://votogether/./src/components/common/TimePickerOptionList/TimePickerOption/style.ts","webpack://votogether/./src/components/common/TimePickerOptionList/style.ts","webpack://votogether/./src/components/optionList/WritingVoteOptionList/WritingVoteOption/OptionCancelButton/style.ts","webpack://votogether/./src/components/optionList/WritingVoteOptionList/WritingVoteOption/OptionUploadImageButton/style.ts","webpack://votogether/./src/components/optionList/WritingVoteOptionList/WritingVoteOption/style.ts","webpack://votogether/./src/components/optionList/WritingVoteOptionList/style.ts"],"sourcesContent":["import { styled } from 'styled-components';\n\nexport const ContentImageContainer = styled.div`\n  display: grid;\n  grid-template-columns: 40px auto;\n`;\n\nexport const ContentImageWrapper = styled.div`\n  width: 60%;\n\n  position: relative;\n`;\n\nexport const ContentImage = styled.img`\n  width: 100%;\n  border-radius: 4px;\n\n  aspect-ratio: 1/1;\n  object-fit: cover;\n`;\n\nexport const FileInputContainer = styled.div<{ $isVisible: boolean }>`\n  width: 100%;\n  margin: 5px;\n  border-radius: 50%;\n\n  visibility: ${props => !props.$isVisible && 'hidden'};\n`;\n\nexport const FileInput = styled.input`\n  visibility: hidden;\n`;\n\nexport const Label = styled.label`\n  display: block;\n\n  width: 100%;\n  height: 100%;\n  border: 2px solid var(--primary-color);\n  border-radius: 5px;\n  padding: 5px 0;\n\n  background-color: var(--primary-color);\n  color: var(--white);\n\n  font: var(--text-body);\n  text-align: center;\n\n  cursor: pointer;\n`;\n","import { styled } from 'styled-components';\n\nimport { theme } from '@styles/theme';\n\nexport const HeaderWrapper = styled.div`\n  width: 100%;\n\n  position: fixed;\n\n  z-index: ${theme.zIndex.header};\n\n  @media (min-width: ${theme.breakpoint.sm}) {\n    display: none;\n  }\n`;\n\nexport const HeaderButton = styled.button`\n  width: 30px;\n\n  color: white;\n\n  cursor: pointer;\n`;\n\nexport const Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: start;\n  align-items: center;\n  gap: 40px;\n\n  width: 100%;\n  padding: 70px 30px;\n\n  box-sizing: border-box;\n\n  @media (min-width: ${theme.breakpoint.sm}) {\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: start;\n\n    padding: 30px 70px;\n  }\n`;\n\nexport const Title = styled.input`\n  padding: 10px;\n\n  color: gray;\n\n  font: var(--text-title);\n\n  @media (min-width: ${theme.breakpoint.md}) {\n    font-size: 2.4rem;\n  }\n\n  @media (min-width: ${theme.breakpoint.lg}) {\n    font-size: 2.8rem;\n  }\n`;\n\nexport const Content = styled.textarea`\n  padding: 10px;\n\n  height: 300px;\n\n  color: gray;\n\n  resize: none;\n\n  font: var(--text-caption);\n  font-family: 'Raleway', sans-serif;\n\n  @media (min-width: ${theme.breakpoint.md}) {\n    font-size: 1.8rem;\n    height: 470px;\n  }\n\n  @media (min-width: ${theme.breakpoint.lg}) {\n    height: 670px;\n    font-size: 2rem;\n  }\n`;\n\nexport const RightSide = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  gap: 30px;\n\n  width: 100%;\n  height: 100%;\n\n  @media (min-width: ${theme.breakpoint.sm}) {\n    max-width: 400px;\n\n    margin-top: 40px;\n  }\n`;\n\nexport const LeftSide = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: start;\n  gap: 30px;\n\n  width: 100%;\n`;\n\nexport const OptionListWrapper = styled.div`\n  width: 100%;\n\n  overflow-x: hidden;\n\n  padding-bottom: 40px;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n\n  @media (min-width: ${theme.breakpoint.sm}) {\n    height: 460px;\n\n    overflow-y: auto;\n  }\n`;\n\nexport const Deadline = styled.p`\n  font: var(--text-body);\n  font-weight: bold;\n  text-align: center;\n`;\n\nexport const Description = styled.div`\n  color: gray;\n\n  font: var(--text-small);\n`;\n\nexport const ButtonWrapper = styled.div`\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  grid-template-rows: repeat(2, 46px);\n  gap: 10px;\n\n  margin-bottom: 30px;\n`;\n\nexport const SaveButtonWrapper = styled.div`\n  display: none;\n\n  visibility: hidden;\n\n  @media (min-width: ${theme.breakpoint.sm}) {\n    display: flex;\n\n    width: 100%;\n    height: 60px;\n\n    margin-top: 40px;\n\n    visibility: visible;\n  }\n`;\n\nexport const ModalHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  width: 100%;\n  border-bottom: 1px solid #f6f6f6;\n  padding: 10px;\n\n  font: var(--text-body);\n  font-weight: bold;\n`;\n\nexport const CloseButton = styled.button`\n  width: 25px;\n  height: 20px;\n\n  background: white;\n\n  font: var(--text-body);\n\n  cursor: pointer;\n`;\nexport const ModalBody = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: start;\n  align-items: center;\n  gap: 10px;\n\n  padding: 10px 0;\n\n  font: var(--text-caption);\n`;\n\nexport const ResetButtonWrapper = styled.div`\n  display: flex;\n\n  justify-content: center;\n  align-items: center;\n\n  width: 50%;\n  height: 40px;\n`;\n","import type { UseMutateFunction } from '@tanstack/react-query';\n\nimport React, { HTMLAttributes, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport { PostInfo } from '@type/post';\n\nimport { useContentImage } from '@hooks/useContentImage';\nimport { useText } from '@hooks/useText';\nimport { useToggle } from '@hooks/useToggle';\nimport { useWritingOption } from '@hooks/useWritingOption';\n\nimport Modal from '@components/common/Modal';\nimport NarrowTemplateHeader from '@components/common/NarrowTemplateHeader';\nimport SquareButton from '@components/common/SquareButton';\nimport TimePickerOptionList from '@components/common/TimePickerOptionList';\nimport WritingVoteOptionList from '@components/optionList/WritingVoteOptionList';\n\nimport { addTimeToDate, formatTimeWithOption } from '@utils/post/formatTime';\n\nimport { DEADLINE_OPTION } from './constants';\nimport ContentImagePart from './ContentImageSection';\nimport * as S from './style';\n\ninterface PostFormProps extends HTMLAttributes<HTMLFormElement> {\n  data?: PostInfo;\n  mutate: UseMutateFunction<any, unknown, FormData, unknown>;\n  isError: boolean;\n  error: unknown;\n}\n\nconst MAX_TITLE_LENGTH = 100;\nconst MAX_CONTENT_LENGTH = 1000;\n\nexport default function PostForm({ data, mutate, isError, error }: PostFormProps) {\n  const {\n    title,\n    content,\n    category: categoryIds,\n    startTime,\n    endTime: deadline,\n    voteInfo,\n    imageUrl,\n  } = data ?? {};\n\n  const navigate = useNavigate();\n  const writingOptionHook = useWritingOption(voteInfo?.options);\n  const contentImageHook = useContentImage(imageUrl);\n\n  const { isOpen, openComponent, closeComponent } = useToggle();\n  const [time, setTime] = useState({\n    day: 0,\n    hour: 0,\n    minute: 0,\n  });\n  const baseTime = startTime ? new Date(startTime) : new Date();\n\n  const { text: writingTitle, handleTextChange: handleTitleChange } = useText(title ?? '');\n  const { text: writingContent, handleTextChange: handleContentChange } = useText(content ?? '');\n\n  const handleDeadlineButtonClick = (option: string) => {\n    setTime(formatTimeWithOption(option));\n  };\n\n  const handleResetButton = () => {\n    if (window.confirm('정말 초기화하시겠습니까?')) {\n      const updatedTime = {\n        day: 0,\n        hour: 0,\n        minute: 0,\n      };\n      setTime(updatedTime);\n    }\n  };\n\n  const handlePostFormSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    const formData = new FormData();\n\n    const imageUrlList = [\n      contentImageHook.contentImage,\n      ...writingOptionHook.optionList.map(option => option.imageUrl),\n    ];\n\n    if (e.target instanceof HTMLFormElement) {\n      const optionImageFileInputs =\n        e.target.querySelectorAll<HTMLInputElement>('input[type=\"file\"]');\n      const fileInputList: HTMLInputElement[] = [...optionImageFileInputs];\n      const contentImageFileList: File[] = [];\n      const optionImageFileList: File[] = [];\n      fileInputList.forEach((item, index) => {\n        if (imageUrlList[index] === '') item.value = '';\n        if (item.files) {\n          index === 0\n            ? contentImageFileList.push(item.files[0])\n            : optionImageFileList.push(item.files[0]);\n        }\n      });\n\n      contentImageFileList.map(file => formData.append('contentImages', file));\n      optionImageFileList.map(file => formData.append('optionImages', file));\n\n      const writingOptionList = writingOptionHook.optionList.map(({ text, imageUrl }, index) => {\n        return { content: text, imageUrl: imageUrl };\n      });\n\n      const updatedPostTexts = {\n        categoryIds: [1, 2], // 다중 선택 컴포넌트 구현 후 수정 예정\n        title: writingTitle ?? '',\n        imageUrl: imageUrl ?? '',\n        content: writingContent ?? '',\n        postOptions: writingOptionList,\n        deadline: addTimeToDate(time, baseTime),\n        // 글 수정의 경우 작성시간을 기준으로 마감시간 옵션을 더한다.\n        // 마감시간 옵션을 선택 안했다면 기존의 마감 시간을 유지한다.\n      };\n      formData.append('texts', JSON.stringify(updatedPostTexts));\n\n      mutate(formData);\n\n      if (isError && error instanceof Error) {\n        alert(error.message);\n        return;\n      }\n\n      navigate('/');\n    }\n  };\n\n  const getDeadlineTime = ({\n    day,\n    hour,\n    minute,\n  }: {\n    day: number;\n    hour: number;\n    minute: number;\n  }) => {\n    const timeMessage = [];\n\n    if (day === 0 && hour === 0 && minute === 0) {\n      return '마감 시간을 선택해주세요';\n    }\n\n    if (day > 0) {\n      timeMessage.push(`${day}일`);\n    }\n\n    if (hour > 0) {\n      timeMessage.push(`${hour}시간`);\n    }\n\n    if (minute > 0) {\n      timeMessage.push(`${minute}분`);\n    }\n\n    return `${timeMessage.join(' ')}  후에 마감됩니다.`;\n  };\n\n  return (\n    <>\n      <S.HeaderWrapper>\n        <NarrowTemplateHeader>\n          <S.HeaderButton onClick={() => navigate('/')}>취소</S.HeaderButton>\n          <S.HeaderButton type=\"submit\" form=\"form-post\">\n            저장\n          </S.HeaderButton>\n        </NarrowTemplateHeader>\n      </S.HeaderWrapper>\n      <form id=\"form-post\" onSubmit={handlePostFormSubmit}>\n        <S.Wrapper>\n          <S.LeftSide>\n            <select>\n              {categoryIds && categoryIds.map(({ id, name }) => <option key={id}>{name}✅</option>)}\n              <option>카테고리1</option>\n              <option>카테고리2</option>\n            </select>\n            <S.Title\n              value={writingTitle}\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) => handleTitleChange(e, 100)}\n              placeholder=\"제목을 입력해주세요\"\n              maxLength={MAX_TITLE_LENGTH}\n              required\n            />\n            <S.Content\n              value={writingContent}\n              onChange={(e: React.ChangeEvent<HTMLTextAreaElement>) => handleContentChange(e, 1000)}\n              placeholder=\"내용을 입력해주세요\"\n              maxLength={MAX_CONTENT_LENGTH}\n              required\n            />\n            <ContentImagePart contentImageHook={contentImageHook} />\n          </S.LeftSide>\n          <S.RightSide>\n            <S.OptionListWrapper>\n              <WritingVoteOptionList writingOptionHook={writingOptionHook} />\n            </S.OptionListWrapper>\n            <S.Deadline>\n              {getDeadlineTime({ hour: time.hour, day: time.day, minute: time.minute })}\n            </S.Deadline>\n            {data && (\n              <S.Description>\n                글 작성일({startTime})로부터 하루 이후 (\n                {addTimeToDate({ day: 1, hour: 0, minute: 0 }, baseTime)})까지만 선택 가능합니다.\n              </S.Description>\n            )}\n            {data && <S.Description>* 기존 마감 시간은 {deadline}입니다. </S.Description>}\n            <S.ButtonWrapper>\n              {DEADLINE_OPTION.map(option => (\n                <SquareButton\n                  aria-label={option}\n                  key={option}\n                  type=\"button\"\n                  onClick={() => handleDeadlineButtonClick(option)}\n                  theme=\"blank\"\n                >\n                  {option}\n                </SquareButton>\n              ))}\n              {\n                <SquareButton type=\"button\" onClick={openComponent} theme=\"blank\">\n                  사용자 지정\n                </SquareButton>\n              }\n            </S.ButtonWrapper>\n            <S.SaveButtonWrapper>\n              <SquareButton theme=\"fill\" type=\"submit\" form=\"form-post\">\n                저장\n              </SquareButton>\n            </S.SaveButtonWrapper>\n          </S.RightSide>\n        </S.Wrapper>\n        {isOpen && (\n          <Modal size=\"sm\" onModalClose={closeComponent}>\n            <>\n              <S.ModalHeader>\n                <h3>마감 시간 선택</h3>\n                <S.CloseButton onClick={closeComponent}>X</S.CloseButton>\n              </S.ModalHeader>\n              <S.ModalBody>\n                <S.Description>최대 3일을 넘을 수 없습니다.</S.Description>\n                <TimePickerOptionList time={time} setTime={setTime} />\n                <S.ResetButtonWrapper>\n                  <SquareButton onClick={handleResetButton} type=\"button\" theme=\"blank\">\n                    초기화\n                  </SquareButton>\n                </S.ResetButtonWrapper>\n              </S.ModalBody>\n            </>\n          </Modal>\n        )}\n      </form>\n    </>\n  );\n}\n","import { styled } from 'styled-components';\n\nimport { Size } from '@type/style';\n\ninterface ButtonProps {\n  size: Size;\n}\n\nconst SIZE = {\n  sm: { button: '25px', font: '13px' },\n  md: { button: '40px', font: '30px' },\n  lg: { button: '60px', font: '50px' },\n};\n\nexport const Button = styled.button<ButtonProps>`\n  display: block;\n\n  width: ${props => SIZE[props.size].button};\n  height: ${props => SIZE[props.size].button};\n  border-radius: 50%;\n\n  background-color: var(--primary-color);\n  color: var(--white);\n\n  font-size: ${props => SIZE[props.size].font};\n\n  cursor: pointer;\n`;\n","import { styled } from 'styled-components';\n\nimport { Size } from '@type/style';\n\nconst MODAL_SIZE: Record<Size, string> = {\n  sm: '290px',\n  md: '590px',\n  lg: '700px',\n};\n\nexport const All = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nexport const Backdrop = styled.div`\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n\n  background: rgba(0, 0, 0, 0.35);\n`;\n\nexport const Container = styled.div<{ size: Size }>`\n  display: grid;\n  grid-template-rows: 1fr 6fr;\n\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  width: ${props => MODAL_SIZE[props.size]};\n  height: 290px;\n  border-radius: 12px;\n  border: 2px solid #f6f6f6;\n  padding: 5px;\n\n  background-color: white;\n\n  box-shadow: 0 0 6px 0 rgba(0, 0, 0, 0.5);\n`;\n","import { styled } from 'styled-components';\n\ninterface ButtonProps {\n  theme: 'blank' | 'fill';\n}\n\nexport const Button = styled.button<ButtonProps>`\n  display: block;\n\n  width: 100%;\n  height: 100%;\n  border: 2px solid var(--primary-color);\n  border-radius: 5px;\n\n  background-color: ${props =>\n    props.theme === 'blank' ? 'rgba(0,0,0,0)' : 'var(--primary-color)'};\n  color: ${props => (props.theme === 'blank' ? 'var(--primary-color)' : 'var(--white)')};\n\n  font: var(--text-body);\n\n  cursor: pointer;\n`;\n","import { styled } from 'styled-components';\n\nexport const TimeBox = styled.div`\n  width: 33.3%;\n  height: 100px;\n  border: 1px solid white;\n\n  background-color: #f2f2f2;\n\n  text-align: center;\n\n  overflow: auto;\n\n  &::-webkit-scrollbar {\n    display: none;\n  }\n\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n`;\n\nexport const Time = styled.div<{ isPicked: boolean }>`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 100%;\n  height: 50px;\n\n  background: ${props => (props.isPicked ? '#F2F2F2' : 'var(--white)')};\n\n  font: var(--text-small);\n  font-weight: ${props => (props.isPicked ? 'bold' : 'light')};\n`;\n","import { styled } from 'styled-components';\n\nexport const Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: start;\n  align-items: center;\n  gap: 15px;\n\n  width: 200px;\n`;\n\nexport const Container = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 100%;\n  border: 1px solid #f2f2f2;\n`;\n\nexport const PickedTimeText = styled.p`\n  display: flex;\n  justify-content: start;\n  align-items: center;\n  gap: 20px;\n\n  font: var(--text-body);\n  font-weight: bold;\n`;\n","import { styled } from 'styled-components';\n\nimport { ButtonCssText, IconImage } from '../style';\n\nexport const Container = styled.button`\n  ${ButtonCssText}\n`;\n\nexport const Image = styled(IconImage)``;\n","import { styled } from 'styled-components';\n\nimport { ButtonCssText, IconImage } from '../style';\n\nexport const Container = styled.div<{ $isVisible: boolean }>`\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  visibility: ${props => props.$isVisible && 'hidden'};\n`;\n\nexport const Label = styled.label`\n  ${ButtonCssText}\n`;\n\nexport const FileInput = styled.input`\n  visibility: hidden;\n`;\n\nexport const Image = styled(IconImage)``;\n","import { styled } from 'styled-components';\n\nimport { theme } from '@styles/theme';\n\nexport const Container = styled.li`\n  display: flex;\n  gap: 10px;\n`;\n\nexport const OptionContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  width: 100%;\n  padding: 20px;\n  border-radius: 4px;\n\n  background-color: #e6e6e6;\n`;\n\nexport const ContentContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  gap: 10px;\n\n  width: 100%;\n`;\n\nexport const ContentTextArea = styled.textarea`\n  width: 100%;\n  height: 90px;\n  padding: 8px;\n\n  font: var(--text-caption);\n  line-height: 2.4rem;\n\n  background-color: #e6e6e6;\n\n  resize: none;\n\n  @media (min-width: ${theme.breakpoint.md}) {\n    height: 120px;\n\n    font: var(--text-body);\n  }\n`;\n\nexport const ImageContainer = styled.div`\n  width: 80%;\n  margin-top: 20px;\n\n  position: relative;\n`;\n\nexport const Image = styled.img`\n  width: 100%;\n  border-radius: 4px;\n\n  aspect-ratio: 1/1;\n  object-fit: cover;\n`;\n\nexport const ImageCancelWrapper = styled.div`\n  position: absolute;\n  top: 10px;\n  right: 10px;\n`;\n\nexport const CancelButtonWrapper = styled.div`\n  width: 34px;\n  height: 100%;\n`;\n\nexport const ButtonCssText = `\ndisplay: flex;\njustify-content: center;\nalign-items: center;\n\nwidth: 24px;\nheight: 24px;\nborder-radius: 50%;\n\nbackground-color: #bebebe;\n\ncursor: pointer;\n\n@media (min-width: ${theme.breakpoint.md}) {\n width:28px;\n height:28px;\n}\n`;\n\nexport const IconImage = styled.img`\n  width: 14px;\n  height: 14px;\n\n  @media (min-width: ${theme.breakpoint.md}) {\n    width: 16px;\n    height: 16px;\n  }\n`;\n","import { styled } from 'styled-components';\n\nexport const Container = styled.ul`\n  display: flex;\n  flex-direction: column;\n\n  gap: 20px;\n`;\n\nexport const AddButtonWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n\n  position: relative;\n`;\n"],"names":[],"sourceRoot":""}